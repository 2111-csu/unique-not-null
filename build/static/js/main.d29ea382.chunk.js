(this.webpackJsonpgraceshopperbackend=this.webpackJsonpgraceshopperbackend||[]).push([[0],{28:function(e,t,a){e.exports=a(61)},51:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),l=a.n(c),s=a(5),o=a(3),u=a.n(o),i=a(10),m=a(4),p=a(1),d=a(14),h=a.n(d),g=function(){var e=Object(i.a)(u.a.mark((function e(t){var a,n,r,c,l,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,n=t.method,r=void 0===n?"GET":n,c=t.token,l=t.data,e.prev=1,s={url:a,method:r.toUpperCase(),headers:{"Content-Type":"application/json"},data:l},c&&(s.headers.Authorization="Bearer ".concat(c)),e.next=6,h()(s);case 6:if(o=e.sent,console.log(o),!o.error){e.next=10;break}throw o.error;case 10:return e.abrupt("return",o);case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();a(51);var E=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],l=JSON.parse(localStorage.getItem("user")),s=JSON.parse(localStorage.getItem("token")),o=Object(n.useState)(s),d=Object(m.a)(o,2),h=(d[0],d[1]),E=Object(n.useState)(l),f=Object(m.a)(E,2),w=f[0],y=f[1],x=Object(n.useState)(null),S=Object(m.a)(x,2),N=S[0],I=S[1],C=Object(n.useState)([]),P=Object(m.a)(C,2),T=P[0],L=P[1];return Object(n.useEffect)((function(){(function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({url:"/api/health",method:"GET"});case 2:t=e.sent,c(t?"api is up! :D":"api is down :/");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"app-container"},r.a.createElement("h1",null,"Hello, World!"),r.a.createElement("p",null,"API Status: ",a)),r.a.createElement("div",{className:"app-container"},r.a.createElement(b,{loggedIn:w,setLoggedIn:y,message:N,setMessage:I}),r.a.createElement(p.a,{exact:!0,path:"/payment"}),r.a.createElement(p.a,{exact:!0,path:"/products"},r.a.createElement(k,{products:T,setProducts:L})," "),r.a.createElement(p.a,{exact:!0,path:"/products/:productId"},r.a.createElement(j,{products:T})),r.a.createElement(p.a,{exact:!0,path:"/user-info"}),r.a.createElement(p.a,{exact:!0,path:"/login"},r.a.createElement(v,{setLoggedIn:y,setToken:h,setMessage:I})),r.a.createElement(p.a,{exact:!0,path:"/register"},r.a.createElement(O,{setToken:h,setMessage:I})),r.a.createElement(p.a,{exact:!0,path:"/admin"}),r.a.createElement(p.a,{exact:!0,path:"/"})))},f=function(){var e=document.getElementById("snackbar");e.className="show",setTimeout((function(){e.className=e.className.replace("show","")}),3e3)},b=function(e){var t=e.loggedIn,a=e.setLoggedIn,n=e.message,c=e.setMessage,l=Object(p.e)();return r.a.createElement("div",{id:"site-title"},r.a.createElement("div",null,r.a.createElement("h1",null,"Popcorn Perfection")),r.a.createElement("div",{id:"navbar"},r.a.createElement(s.b,{className:"navlink",to:"/"},"Home"),r.a.createElement(s.b,{className:"navlink",to:"/products"},"Products"),t?r.a.createElement(s.b,{className:"navlink",to:"/"},"My Orders"):r.a.createElement(s.b,{className:"navlink",to:"/login"},"Login"),t?r.a.createElement(s.b,{className:"navlink",to:"/",onClick:function(){a(null),c("You have successfully logged out"),f(),localStorage.clear(),l.push("/")}},"Logout"):r.a.createElement(s.b,{className:"navlink",to:"/register"},"Register")),r.a.createElement("div",{id:"snackbar"},n))},v=function(e){var t=e.setToken,a=e.setLoggedIn,c=e.setMessage,l=Object(n.useState)(""),s=Object(m.a)(l,2),o=s[0],d=s[1],h=Object(n.useState)(""),E=Object(m.a)(h,2),b=E[0],v=E[1],O=Object(p.e)(),k=function(){var e=Object(i.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,g({url:"/api/users/login",method:"POST",headers:{"Content-Type":"application/json"},data:{username:o,password:b}});case 4:r=e.sent,t(r.data.token),console.log(r.data.token),r.data.token?(localStorage.setItem("token",JSON.stringify(r.data.token)),localStorage.setItem("user",JSON.stringify(r.data.user.username)),a(r.data.user.username),c(r.data.message),f(),O.push("/")):(c(r.data.message),f()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"container"},r.a.createElement("div",{id:"login"},r.a.createElement("form",{onSubmit:k},r.a.createElement("label",{htmlFor:"username"},"UserName: "),r.a.createElement("input",{type:"text",id:"username-input",name:"username",placeholder:"username",value:o,onChange:function(e){return d(e.target.value)}}),r.a.createElement("label",{htmlFor:"password"},"Password: "),r.a.createElement("input",{type:"password",id:"password-input",name:"password",placeholder:"password",value:b,onChange:function(e){return v(e.target.value)}}),r.a.createElement("button",{type:"submit"},"Login"))))},O=function(e){var t=e.setToken,a=e.setMessage,c=Object(n.useState)(""),l=Object(m.a)(c,2),s=l[0],o=l[1],d=Object(n.useState)(""),h=Object(m.a)(d,2),E=h[0],b=h[1],v=Object(n.useState)(""),O=Object(m.a)(v,2),k=O[0],j=O[1],w=Object(n.useState)(""),y=Object(m.a)(w,2),x=y[0],S=y[1],N=Object(n.useState)(""),I=Object(m.a)(N,2),C=I[0],P=I[1],T=Object(p.e)(),L=function(){var e=Object(i.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,g({url:"/api/users/register",method:"POST",headers:{"Content-Type":"application/json"},data:{username:s,password:E,email:k,firstName:x,lastName:C}});case 4:r=e.sent,console.log("register result",r),t(r.data.token),r.data.token?(a(r.data.message),f(),T.push("/login")):(a(r.data.message),f()),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(1),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"container"},r.a.createElement("div",{id:"register"},r.a.createElement("form",{onSubmit:L},r.a.createElement("label",{htmlFor:"firstname"},"First Name: "),r.a.createElement("input",{type:"text",id:"firstname-input",name:"firstName",value:x,onChange:function(e){return S(e.target.value)}}),r.a.createElement("label",{htmlFor:"lastname"},"Last Name: "),r.a.createElement("input",{type:"text",id:"lastname-input",name:"lastName",value:C,onChange:function(e){return P(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"email"},"Email Address: "),r.a.createElement("input",{type:"text",id:"email-input",name:"email",value:k,onChange:function(e){return j(e.target.value)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"username"},"UserName: "),r.a.createElement("input",{type:"text",id:"username-input",name:"username",placeholder:"username",value:s,onChange:function(e){return o(e.target.value)}}),r.a.createElement("label",{htmlFor:"password"},"Password: "),r.a.createElement("input",{type:"password",id:"password-input","min-length":"8",name:"password",placeholder:"password",value:E,onChange:function(e){return b(e.target.value)}}),r.a.createElement("button",{type:"submit"},"Register"))))},k=function(e){var t=e.products,a=e.setProducts,c=Object(p.f)().search,l=Object(p.e)(),o=new URLSearchParams(c).get("searchTerm")||"";Object(n.useEffect)((function(){(function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g({url:"/api/products",method:"GET"});case 2:t=e.sent,console.log(t),console.log(t.data),a(t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]);var m=t.filter((function(e){return function(e,t){for(var a=0,n=[e.name,e.description,e.category];a<n.length;a++){if(n[a].toLowerCase().includes(t.toLowerCase()))return!0}}(e,o)}));return r.a.createElement("div",{id:"products-page"},r.a.createElement("h2",null,"Products Page"),r.a.createElement("h3",null,"Would you like to buy any popcorn?"),r.a.createElement("h5",{id:"search-word"},"Search: "),r.a.createElement("input",{id:"search-field",type:"text",placeholder:"search here",onChange:function(e){l.push(e.target.value?"/products?searchTerm=".concat(e.target.value):"/products")}}),r.a.createElement("div",null,m.map((function(e){return r.a.createElement("div",{key:e.id,id:"single-product",style:{border:"1px solid black"}},r.a.createElement("h4",null,r.a.createElement("u",null,"Name:"),r.a.createElement(s.b,{to:"/products/".concat(e.id)}," ",e.name)),r.a.createElement("h4",null,r.a.createElement("u",null,"Description:")," ",e.description),r.a.createElement("h4",null,r.a.createElement("u",null,"Price:")," ",e.price),r.a.createElement("img",{src:e.imageurl,alt:"photo of ".concat(e.name," the ").concat(e.name)}),r.a.createElement("h4",null,r.a.createElement("u",null,"In stock?")," ",e.inStock))}))))},j=function(e){var t=e.products,a=Object(p.g)().productId,n=t.filter((function(e){return e.id===Number(a)})),c=Object(m.a)(n,1)[0];return r.a.createElement("div",{key:c.id,id:"single-product",style:{border:"1px solid black"}},r.a.createElement("h4",null,r.a.createElement("u",null,"Name:"),c.name),r.a.createElement("h4",null,r.a.createElement("u",null,"Description:"),c.description),r.a.createElement("h4",null,r.a.createElement("u",null,"Price: "),c.price),r.a.createElement("img",{src:c.imageurl,alt:"photo of ".concat(c.name," the ").concat(c.name)}),r.a.createElement("h4",null,r.a.createElement("u",null,"In stock?"),c.inStock))};a(60);l.a.render(r.a.createElement(s.a,null,r.a.createElement(E,null)),document.getElementById("app"))}},[[28,1,2]]]);
//# sourceMappingURL=main.d29ea382.chunk.js.map